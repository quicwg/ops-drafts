<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Applicability of the QUIC Transport Protocol</title>
<meta content="Mirja Kuehlewind" name="author">
<meta content="Brian Trammell" name="author">
<meta content="
       This document discusses the applicability of the QUIC transport protocol,
focusing on caveats impacting application protocol development and deployment
over QUIC. Its intended audience is designers of application protocol mappings
to QUIC, and implementors of these application protocols. 
    " name="description">
<meta content="xml2rfc 3.13.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-quic-applicability-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.13.0
    Python 3.10.4
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    kitchen 1.2.6
    lxml 4.9.1
    MarkupSafe 2.1.1
    pycountry 22.3.5
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.4.0
    six 1.16.0
-->
<link href="draft-ietf-quic-applicability.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
dd.break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: 14.5px;
}
.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([stroke="fill"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">QUIC Applicability</td>
<td class="right">July 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kuehlewind &amp; Trammell</td>
<td class="center">Expires 12 January 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-quic-applicability-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-07-11" class="published">11 July 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-01-12">12 January 2023</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Kuehlewind</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">B. Trammell</div>
<div class="org">Google</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Applicability of the QUIC Transport Protocol</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document discusses the applicability of the QUIC transport protocol,
focusing on caveats impacting application protocol development and deployment
over QUIC. Its intended audience is designers of application protocol mappings
to QUIC, and implementors of these application protocols.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 12 January 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-the-necessity-of-fallback" class="xref">The Necessity of Fallback</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-zero-rtt" class="xref">Zero RTT</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-replay-attacks" class="xref">Replay Attacks</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-session-resumption-versus-k" class="xref">Session resumption versus Keep-alive</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-use-of-streams" class="xref">Use of Streams</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-stream-versus-flow-multiple" class="xref">Stream versus Flow Multiplexing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-prioritization" class="xref">Prioritization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-ordered-and-reliable-delive" class="xref">Ordered and Reliable Delivery</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-flow-control-deadlocks" class="xref">Flow Control Deadlocks</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-stream-limit-commitments" class="xref">Stream Limit Commitments</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-packetization-and-latency" class="xref">Packetization and Latency</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-error-handling" class="xref">Error Handling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-ack-only-packets-on-constra" class="xref">ACK-only packets on constrained links</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-port-selection-and-applicat" class="xref">Port Selection and Application Endpoint Discovery</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-connection-migration" class="xref">Connection Migration</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-connection-termination" class="xref">Connection Termination</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-information-exposure-and-th" class="xref">Information Exposure and the Connection ID</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-server-generated-connection" class="xref">Server-Generated Connection ID</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-mitigating-timing-linkabili" class="xref">Mitigating Timing Linkability with Connection ID Migration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="xref">11.3</a>.  <a href="#name-using-server-retry-for-redi" class="xref">Using Server Retry for Redirection</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-quality-of-service-qos-and-" class="xref">Quality of Service (QoS) and DSCP</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-use-of-versions-and-cryptog" class="xref">Use of Versions and Cryptographic Handshake</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-enabling-new-versions" class="xref">Enabling New Versions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-unreliable-datagram-service" class="xref">Unreliable Datagram Service over QUIC</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="xref">16</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="xref">17</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-18" class="xref">18</a>. <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-19" class="xref">19</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#section-20" class="xref">20</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.1">
                <p id="section-toc.1-1.20.2.1.1"><a href="#section-20.1" class="xref">20.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.2">
                <p id="section-toc.1-1.20.2.2.1"><a href="#section-20.2" class="xref">20.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">QUIC <span>[<a href="#QUIC" class="xref">QUIC</a>]</span> is a new transport protocol providing a number of advanced
features. While initially designed for the HTTP use case, it provides
capabilities that can be used with a much wider variety of applications. QUIC is
encapsulated in UDP. QUIC version 1 integrates TLS 1.3 <span>[<a href="#TLS13" class="xref">TLS13</a>]</span> to
encrypt all payload data and most control information. The version of HTTP that
uses QUIC is known as HTTP/3 <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">This document provides guidance for application developers that want to use
the QUIC protocol without implementing it on their own. This includes general
guidance for applications operating over HTTP/3 or directly over QUIC.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">In the following sections we discuss specific caveats to QUIC's applicability,
and issues that application developers must consider when using QUIC as a
transport for their application.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fallback">
<section id="section-2">
      <h2 id="name-the-necessity-of-fallback">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-the-necessity-of-fallback" class="section-name selfRef">The Necessity of Fallback</a>
      </h2>
<p id="section-2-1">QUIC uses UDP as a substrate. This enables userspace implementation and permits
traversal of network middleboxes (including NAT) without requiring updates to
existing network infrastructure.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">While recent measurements have shown no evidence of a widespread, systematic
disadvantage of UDP traffic compared to TCP in the Internet <span>[<a href="#Edeline16" class="xref">Edeline16</a>]</span>,
somewhere between three <span>[<a href="#Trammell16" class="xref">Trammell16</a>]</span> and five <span>[<a href="#Swett16" class="xref">Swett16</a>]</span> percent of networks
block all UDP traffic. All applications running on top of QUIC must
therefore either be prepared to accept connectivity failure on such networks
or be engineered to fall back to some other transport protocol. In the case of
HTTP, this fallback is TLS over TCP.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">The IETF TAPS specifications <span>[<a href="#I-D.ietf-taps-arch" class="xref">I-D.ietf-taps-arch</a>]</span> describe a system with a
common API for multiple protocols and some of the implications of fallback
between these different protocols, specifically precluding fallback to
insecure protocols or to weaker versions of secure protocols.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">An application that implements fallback needs to consider the security
consequences. A fallback to TCP and TLS exposes control information to
modification and manipulation in the network. Further downgrades to older TLS
versions than used in QUIC, which is 1.3, might result in significantly weaker
cryptographic protection. For example, the results of protocol negotiation
<span>[<a href="#RFC7301" class="xref">RFC7301</a>]</span> only have confidentiality protection if TLS 1.3 is used.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">These applications must operate, perhaps with impaired functionality, in the
absence of features provided by QUIC not present in the fallback protocol. For
fallback to TLS over TCP, the most obvious difference is that TCP does not
provide stream multiplexing and therefore stream multiplexing would need to be
implemented in the application layer if needed. Further, TCP implementations
and network paths often do not support the Fast Open option <span>[<a href="#RFC7413" class="xref">RFC7413</a>]</span>, which
enables sending of payload data together with the first control packet of a new
connection as also provided by 0-RTT session resumption in QUIC. Note that
there is some evidence of middleboxes blocking SYN data even if TFO was
successfully negotiated (see <span>[<a href="#PaaschNanog" class="xref">PaaschNanog</a>]</span>). And even if Fast Open
successfully operates end-to-end, it is limited to a single packet of TLS
handshake and application data, unlike QUIC 0-RTT.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">Moreover, while encryption (in this case TLS) is inseparably integrated with
QUIC, TLS negotiation over TCP can be blocked. If TLS over TCP cannot be
supported, the connection should be aborted, and the application then ought
to present a suitable prompt to the user that secure communication is
unavailable.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">In summary, any fallback mechanism is likely to impose a degradation of
performance and can degrade security; however, fallback must not silently
violate the application's expectation of confidentiality or integrity of its
payload data.<a href="#section-2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="zero-rtt">
<section id="section-3">
      <h2 id="name-zero-rtt">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-zero-rtt" class="section-name selfRef">Zero RTT</a>
      </h2>
<p id="section-3-1">QUIC provides for 0-RTT connection establishment. Though the same facility
exists in TLS 1.3 with TCP, 0-RTT presents opportunities and challenges for
applications using QUIC.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">A transport protocol that provides 0-RTT connection establishment is
qualitatively different than one that does not from the point of view of the
application using it. Relative trade-offs between the cost of closing and
reopening a connection and trying to keep it open are different; see
<a href="#resumption-v-keepalive" class="xref">Section 3.2</a>.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">An application needs to deliberately choose to use 0-RTT, as 0-RTT carries a
risk of replay attack.  Application protocols that use 0-RTT require a profile
that describes the types of information that can be safely sent. For HTTP, this
profile is described in <span>[<a href="#HTTP-REPLAY" class="xref">HTTP-REPLAY</a>]</span>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<div id="replay-attacks">
<section id="section-3.1">
        <h3 id="name-replay-attacks">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-replay-attacks" class="section-name selfRef">Replay Attacks</a>
        </h3>
<p id="section-3.1-1">Retransmission or (malicious) replay of data contained in 0-RTT packets could
cause the server side to receive two copies of the same data.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Application data sent by the client in 0-RTT packets could be processed more
than once if it is replayed. Applications need to be aware of what is safe to
send in 0-RTT. Application protocols that seek to enable the use of 0-RTT need
a careful analysis and a description of what can be sent in 0-RTT; see Section
5.6 of <span>[<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">In some cases, it might be sufficient to limit application data sent in 0-RTT
to that which only causes actions at a server that are known to be free of
lasting effect. Initiating data retrieval or establishing configuration are
examples of actions that could be safe. Idempotent operations - those for which
repetition has the same net effect as a single operation - might be safe.
However, it is also possible to combine individually idempotent operations into
a non-idempotent sequence of operations.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">Once a server accepts 0-RTT data there is no means of selectively discarding
data that is received. However, protocols can define ways to reject individual
actions that might be unsafe if replayed.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Some TLS implementations and deployments might be able to provide partial or
even complete replay protection, which could be used to manage replay risk.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="resumption-v-keepalive">
<section id="section-3.2">
        <h3 id="name-session-resumption-versus-k">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-session-resumption-versus-k" class="section-name selfRef">Session resumption versus Keep-alive</a>
        </h3>
<p id="section-3.2-1">Because QUIC is encapsulated in UDP, applications using QUIC must deal with
short network idle timeouts. Deployed stateful middleboxes will generally
establish state for UDP flows on the first packet sent, and keep state for
much shorter idle periods than for TCP. <span>[<a href="#RFC5382" class="xref">RFC5382</a>]</span> suggests a TCP idle
period of at least 124 minutes, though there is not evidence of widespread
implementation of this guideline in the literature. Short network timeout for
UDP, however, is well-documented. According to a 2010 study
(<span>[<a href="#Hatonen10" class="xref">Hatonen10</a>]</span>), UDP applications can assume that any NAT binding or other
state entry can expire after just thirty seconds of inactivity.  <span><a href="https://rfc-editor.org/rfc/rfc8085#section-3.5" class="relref">Section 3.5</a> of [<a href="#RFC8085" class="xref">RFC8085</a>]</span> further discusses keep-alive intervals for UDP: it
requires a minimum value of 15 seconds, but recommends larger values, or
omitting keep-alive entirely.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">By using a connection ID, QUIC is designed to be robust to NAT address
rebinding after a timeout. However, this only helps if one endpoint maintains
availability at the address its peer uses, and the peer is the one to send
after the timeout occurs.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Some QUIC connections might not be robust to NAT rebinding because the routing
infrastructure (in particular, load balancers) uses the address/port four-tuple
to direct traffic. Furthermore, middleboxes with functions other than address
translation could still affect the path. In particular, some firewalls do not
admit server traffic for which the firewall has no recent state for a
corresponding packet sent from the client.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">QUIC applications can adjust idle periods to manage the risk of timeout. Idle
periods and the network idle timeout are distinct from the connection idle
timeout, which is defined as the minimum of either endpoint's idle timeout
parameter; see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-10.1" class="relref">Section 10.1</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>). There are three options:<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-5.1">Ignore the issue, if the application-layer protocol consists only of
interactions with no or very short idle periods, or the protocol's resistance
to NAT rebinding is sufficient.<a href="#section-3.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.2">Ensure there are no long idle periods.<a href="#section-3.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-5.3">Resume the session after a long idle period, using 0-RTT resumption when
appropriate.<a href="#section-3.2-5.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.2-6">The first strategy is the easiest, but it only applies to certain applications.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<p id="section-3.2-7">Either the server or the client in a QUIC application can send PING frames as
keep-alives, to prevent the connection and any on-path state from timing out.
Recommendations for the use of keep-alives are application-specific, mainly
depending on the latency requirements and message frequency of the application.
In this case, the application mapping must specify whether the client or server
is responsible for keeping the application alive.  While <span>[<a href="#Hatonen10" class="xref">Hatonen10</a>]</span> suggests
that 30 seconds might be a suitable value for the public Internet when a NAT
is on path, larger values are preferable if the deployment can consistently
survive NAT rebinding or is known to be in a controlled environment (e.g.
data centres) in order to lower network and computational load.<a href="#section-3.2-7" class="pilcrow">¶</a></p>
<p id="section-3.2-8">Sending PING frames more frequently than every 30 seconds over long idle
periods may result in excessive unproductive traffic in some situations, and to
unacceptable power usage for power-constrained (mobile) devices. Additionally,
timeouts shorter than 30 seconds can make it harder to handle transient network
interruptions, such as VM migration or coverage loss during mobilty.
See <span>[<a href="#RFC8085" class="xref">RFC8085</a>]</span>, especially Section 3.5.<a href="#section-3.2-8" class="pilcrow">¶</a></p>
<p id="section-3.2-9">Alternatively, the client (but not the server) can use session resumption
instead of sending keepalive traffic. In this case, a client that wants to send
data to a server over a connection idle longer than the server's idle timeout
(available from the idle_timeout transport parameter) can simply reconnect. When
possible, this reconnection can use 0-RTT session resumption, reducing the
latency involved with restarting the connection. Of course, this approach is
only valid in cases in which 0-RTT data is safe, when the client is the
restarting peer, and when the data to be sent is idempotent. It is also not
applicable when the application binds external state to the connection, as this
state cannot reliably be transferred to a resumed connection.<a href="#section-3.2-9" class="pilcrow">¶</a></p>
<p id="section-3.2-10">The tradeoffs between resumption and keep-alives need to be evaluated on a
per-application basis. In general, applications should use keep-alives only in
circumstances where continued communication is highly likely; <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>, for
instance, recommends using keep-alives only when a request is outstanding.<a href="#section-3.2-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="use-of-streams">
<section id="section-4">
      <h2 id="name-use-of-streams">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-use-of-streams" class="section-name selfRef">Use of Streams</a>
      </h2>
<p id="section-4-1">QUIC's stream multiplexing feature allows applications to run multiple streams
over a single connection, without head-of-line blocking between streams,
associated at a point in time with a single five-tuple. Stream data is carried
within frames, where one QUIC packet on the wire can carry one or multiple
stream frames.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Streams can be unidirectional or bidirectional, and a stream may be initiated
either by client or server. Only the initiator of a unidirectional stream can
send data on it.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Streams and connections can each carry a maximum of
 2<sup>62</sup>-1 bytes in each direction, due to encoding limitations on
stream offsets and connection flow control limits. In the presently unlikely
event that this limit is reached by an application, a new connection would
need to be established.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Streams can be independently opened and closed, gracefully or abruptly. An
application can gracefully close the egress direction of a stream by instructing
QUIC to send a FIN bit in a STREAM frame. It cannot gracefully close the ingress
direction without a peer-generated FIN, much like in TCP. However, an endpoint
can abruptly close the egress direction or request that its peer abruptly close
the ingress direction; these actions are fully independent of each other.<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">QUIC does not provide an interface for exceptional handling of any stream.
If a stream that is critical for an application is closed, the application can
generate error messages on the application layer to inform the other end and/or
the higher layer, which can eventually terminate the QUIC connection.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">Mapping of application data to streams is application-specific and described for
HTTP/3 in <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>. There are a few general principles to apply when
designing an application's use of streams:<a href="#section-4-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-7.1">A single stream provides ordering. If the application requires certain data to
be received in order, that data should be sent on the same stream. There is
no guarantee of transmission, reception, or delivery order across streams.<a href="#section-4-7.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-7.2">Multiple streams provide concurrency. Data that can be processed
independently, and therefore would suffer from head of line blocking if forced
to be received in order, should be transmitted over separate streams.<a href="#section-4-7.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-7.3">Streams can provide message orientation, and allow messages to be cancelled.
If one message is mapped to a single stream, resetting the stream to expire an
unacknowledged message can be used to emulate partial reliability
for that message.<a href="#section-4-7.3" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-8">If a QUIC receiver has opened the maximum allowed concurrent
streams, and the sender indicates that more streams are needed, it
does not automatically lead to an increase of the maximum number of
streams by the receiver. Therefore, an application can use the maximum
number of allowed, currently open, and currently used streams when
determining how to map data to streams.<a href="#section-4-8" class="pilcrow">¶</a></p>
<p id="section-4-9">QUIC assigns a numerical identifier to each stream, called the Stream ID.  While
the relationship between these identifiers and stream types is clearly defined
in version 1 of QUIC, future versions might change this relationship for various
reasons. QUIC implementations should expose the properties of each stream
(which endpoint initiated the stream, whether the stream is unidirectional or
bidirectional, the Stream ID used for the stream); applications should query for
these properties rather than attempting to infer them from the Stream ID.<a href="#section-4-9" class="pilcrow">¶</a></p>
<p id="section-4-10">The method of allocating stream identifiers to streams opened by the application
might vary between transport implementations. Therefore, an application should
not assume a particular stream ID will be assigned to a stream that has not yet
been allocated.  For example, HTTP/3 uses Stream IDs to refer to streams that
have already been opened, but makes no assumptions about future Stream IDs or
the way in which they are assigned <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-6" class="relref">Section 6</a> of [<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>).<a href="#section-4-10" class="pilcrow">¶</a></p>
<div id="stream-versus-flow-multiplexing">
<section id="section-4.1">
        <h3 id="name-stream-versus-flow-multiple">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-stream-versus-flow-multiple" class="section-name selfRef">Stream versus Flow Multiplexing</a>
        </h3>
<p id="section-4.1-1">Streams are meaningful only to the application; since stream information is
carried inside QUIC's encryption boundary, no information about the stream(s)
whose frames are carried by a given packet is visible to the network.
Therefore stream multiplexing is not intended to be used for differentiating
streams in terms of network treatment. Application traffic requiring different
network treatment should therefore be carried over different five-tuples (i.e.
multiple QUIC connections). Given QUIC's ability to send application data in
the first RTT of a connection (if a previous connection to the same host has
been successfully established to provide the necessary credentials), the cost
of establishing another connection is extremely low.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prioritization">
<section id="section-4.2">
        <h3 id="name-prioritization">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-prioritization" class="section-name selfRef">Prioritization</a>
        </h3>
<p id="section-4.2-1">Stream prioritization is not exposed to either the network or the receiver.
Prioritization is managed by the sender, and the QUIC transport should
provide an interface for applications to prioritize streams <span>[<a href="#QUIC" class="xref">QUIC</a>]</span>.
Applications can implement their own prioritization scheme on top of QUIC: an
application protocol that runs on top of QUIC can define explicit messages
for signaling priority, such as those defined in
<span>[<a href="#I-D.draft-ietf-httpbis-priority" class="xref">I-D.draft-ietf-httpbis-priority</a>]</span> for HTTP; it can define rules
that allow an endpoint to determine priority based on context; or it can
provide a higher level interface and leave the determination to the
application on top.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Priority handling of retransmissions can be implemented by the sender in the
transport layer. <span>[<a href="#QUIC" class="xref">QUIC</a>]</span> recommends retransmitting lost data before new data,
unless indicated differently by the application. Currently, QUIC only provides
fully reliable stream transmission, which means that prioritization of
retransmissions will be beneficial in most cases, by filling in gaps and freeing
up the flow control window. For partially reliable or unreliable streams,
priority scheduling of retransmissions over data of higher-priority streams
might not be desirable. For such streams, QUIC could either provide an
explicit interface to control prioritization, or derive the prioritization
decision from the reliability level of the stream.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ordered-and-reliable-delivery">
<section id="section-4.3">
        <h3 id="name-ordered-and-reliable-delive">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-ordered-and-reliable-delive" class="section-name selfRef">Ordered and Reliable Delivery</a>
        </h3>
<p id="section-4.3-1">QUIC streams enable ordered and reliable delivery.  Though it is possible for an
implementation to provide options that use streams for partial reliability
or out-of-order delivery, most implementations will assume that data is
reliably delivered in order.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">Under this assumption, an endpoint that receives stream data might not make
forward progress until data that is contiguous with the start of a stream is
available.  In particular, a receiver might withhold flow control credit until
contiguous data is delivered to the application; see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-2.2" class="relref">Section 2.2</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>.
To support this receive logic, an endpoint will send stream data until it is
acknowledged, ensuring that data at the start of the stream is sent and
acknowledged first.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">An endpoint that uses a different sending behavior and does not negotiate that
change with its peer might encounter performance issues or deadlocks.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="flow-control-deadlocks">
<section id="section-4.4">
        <h3 id="name-flow-control-deadlocks">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-flow-control-deadlocks" class="section-name selfRef">Flow Control Deadlocks</a>
        </h3>
<p id="section-4.4-1">QUIC flow control provides a means of managing access to the limited buffers
endpoints have for incoming data.  This mechanism limits the amount of data that
can be in buffers in endpoints or in transit on the network.  However, there are
several ways in which limits can produce conditions that can cause a connection
to either perform suboptimally or deadlock.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">Deadlocks in flow control are possible for any protocol that uses QUIC, though
whether they become a problem depends on how implementations consume data and
provide flow control credit.  Understanding what causes deadlocking might help
implementations avoid deadlocks.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">The size and rate of transport flow control credit updates can affect
performance. Applications that use QUIC often have a data consumer that reads
data from transport buffers. Some implementations might have independent
transport-layer and application-layer receive buffers. Consuming data does not
always imply it is immediately processed. However, a common flow control
implementation technique is to extend credit to the sender, by emitting MAX_DATA
and/or MAX_STREAM_DATA frames, as data is consumed. Delivery of these frames
is affected by the latency of the back channel from the receiver to the data
sender. If credit is not extended in a timely manner, the
sending application can be blocked, effectively throttling the sender.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">Large application messages can produce deadlocking if the recipient does not
read data from the transport incrementally. If the message is larger than the
flow control credit available and the recipient does not release additional flow
control credit until the entire message is received and delivered, a deadlock
can occur. This is possible even where stream flow control limits are not
reached because connection flow control limits can be consumed by other streams.<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<p id="section-4.4-5">A length-prefixed message format makes it easier for a data consumer to leave
data unread in the transport buffer and thereby withhold flow control credit. If
flow control limits prevent the remainder of a message from being sent, a
deadlock will result.  A length prefix might also enable the detection of this
sort of deadlock.  Where application protocols have messages that might be
processed as a single unit, reserving flow control credit for the entire message
atomically makes this style of deadlock less likely.<a href="#section-4.4-5" class="pilcrow">¶</a></p>
<p id="section-4.4-6">A data consumer can eagerly read all data as it becomes available, in order to
make the receiver extend flow control credit and reduce the chances of a
deadlock.  However, such a data consumer might need other means for holding a
peer accountable for the additional state it keeps for partially processed
messages.<a href="#section-4.4-6" class="pilcrow">¶</a></p>
<p id="section-4.4-7">Deadlocking can also occur if data on different streams is interdependent.
Suppose that data on one stream arrives before the data on a second stream on
which it depends.  A deadlock can occur if the first stream is left unread,
preventing the receiver from extending flow control credit for the second
stream.  To reduce the likelihood of deadlock for interdependent data, the
sender should ensure that dependent data is not sent until the data
it depends on has been accounted for in both stream- and connection- level flow
control credit.<a href="#section-4.4-7" class="pilcrow">¶</a></p>
<p id="section-4.4-8">Some deadlocking scenarios might be resolved by cancelling affected streams with
STOP_SENDING or RESET_STREAM.  Cancelling some streams results in the connection
being terminated in some protocols.<a href="#section-4.4-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="stream-limit-commitments">
<section id="section-4.5">
        <h3 id="name-stream-limit-commitments">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-stream-limit-commitments" class="section-name selfRef">Stream Limit Commitments</a>
        </h3>
<p id="section-4.5-1">QUIC endpoints are responsible for communicating the cumulative limit of streams
they would allow to be opened by their peer. Initial limits are advertised using
the initial_max_streams_bidi and initial_max_streams_uni transport parameters.
As streams are opened and closed they are consumed and the cumulative total is
incremented. Limits can be increased using the MAX_STREAMS frame but there is no
mechanism to reduce limits. Once stream limits are reached, no more streams can
be opened, which prevents applications using QUIC from making further progress.
At this stage connections can be terminated via idle timeout or explicit close;
see <a href="#sec-termination" class="xref">Section 10</a>).<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<p id="section-4.5-2">An application that uses QUIC might communicate a cumulative stream limit but
require the connection to be closed before the limit is reached. For example,
to stop the server to perform scheduled maintenance. Immediate connection close
causes abrupt closure of actively used streams. Depending on how an application
uses QUIC streams, this could be undesirable or detrimental to behavior or
performance. A more graceful closure technique is to stop sending increases to
stream limits and allow the connection to naturally terminate once remaining
streams are consumed. However, the period of time it takes to do so is dependent
on the client and an unpredictable closing period might not fit application or
operational needs. Applications using QUIC can be conservative with open stream
limits in order to reduce the commitment and indeterminism. However, being
overly conservative with stream limits affects stream concurrency. Balancing
these aspects can be specific to applications and their deployments. Instead of
relying on stream limits to avoid abrupt closure, an application-layer graceful
close mechanism can be used to communicate the intention to explicitly close the
connection at some future point.<a href="#section-4.5-2" class="pilcrow">¶</a></p>
<p id="section-4.5-3">HTTP/3 provides such a mechanism using the
GOWAWAY frame. In HTTP/3, when the GOAWAY frame is received by a client, it
stops opening new streams even if the cumulative stream limit would allow.
Instead the client would create a new connection on which to open further
streams.  Once all streams are closed on the old connection, it can be
terminated safely by a connection close or after expiration of the idle time out
(see also <a href="#sec-termination" class="xref">Section 10</a>).<a href="#section-4.5-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="packetization-and-latency">
<section id="section-5">
      <h2 id="name-packetization-and-latency">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-packetization-and-latency" class="section-name selfRef">Packetization and Latency</a>
      </h2>
<p id="section-5-1">QUIC exposes an interface that provides multiple streams to the application;
however, the application usually cannot control how data transmitted over those
streams is mapped into frames or how those frames are bundled into packets.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">By default, many implementations will try to maximally pack QUIC packets
DATA frames from one or more streams to minimize bandwidth consumption and
computational costs (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-13" class="relref">Section 13</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>). If there is not enough data
available to fill a packet, an implementation might wait for a short time, to
optimize bandwidth efficiency instead of latency. This delay can either be
pre-configured or dynamically adjusted based on the observed sending pattern of
the application.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">If the application requires low latency, with only small chunks of data to
send, it may be valuable to indicate to QUIC that all data should be send out
immediately. Alternatively, if the application expects to use a specific
sending pattern, it can also provide a suggested delay to QUIC for how long to
wait before bundle frames into a packet.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">Similarly, an application has usually no control about the length of a QUIC
packet on the wire. QUIC provides the ability to add a PADDING frame to
arbitrarily increase the size of packets. Padding is used by QUIC to ensure that
the path is capable of transferring datagrams of at least a certain size, during
the handshake (see Sections <a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-8.1" class="relref">8.1</a> and <a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-14.1" class="relref">14.1</a> of <span>[<a href="#QUIC" class="xref">QUIC</a>]</span>) and for path validation
after connection migration (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-8.2" class="relref">Section 8.2</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>) as well as for Datagram
Packetization Layer PMTU Discovery (DPLMTUD) (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-14.3" class="relref">Section 14.3</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>).<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">Padding can also be used by an application to reduce leakage of
information about the data that is sent. A QUIC implementation can expose an
interface that allows an application layer to specify how to apply padding.<a href="#section-5-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="error-handling">
<section id="section-6">
      <h2 id="name-error-handling">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-error-handling" class="section-name selfRef">Error Handling</a>
      </h2>
<p id="section-6-1">QUIC recommends that endpoints signal any detected errors to
the peer. Errors can occur at the transport level and the application level.
Transport errors, such as a protocol violation, affect the entire connection.
Applications that use QUIC can define their own error detection and signaling
(see, for example, <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-8" class="relref">Section 8</a> of [<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>). Application errors can affect an
entire connection or a single stream.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">QUIC defines an error code space that is used for error handling at the
transport layer. QUIC encourages endpoints to use the most specific code,
although any applicable code is permitted, including generic ones.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Applications using QUIC define an error
code space that is independent from QUIC or other applications (see, for
example, <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>). The values in an application error code
space can be reused across connection-level and stream-level errors.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Connection errors lead to connection termination. They are signaled using a
CONNECTION_CLOSE frame, which contains an error code and a reason field that can
be zero length. Different types of CONNECTION_CLOSE frame are used to
signal transport and application errors.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">Stream errors lead to stream termination. The are signaled using STOP_SENDING or
RESET_STREAM frames, which contain only an error code.<a href="#section-6-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ack-only-packets-on-constrained-links">
<section id="section-7">
      <h2 id="name-ack-only-packets-on-constra">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-ack-only-packets-on-constra" class="section-name selfRef">ACK-only packets on constrained links</a>
      </h2>
<p id="section-7-1">The cost of sending acknowledgments - in processing cost or link
utilization - could be a significant proportion of available resources if
these resources are constrained. Reducing the rate at which acknowledgments
are generated can preserve these resources and improve overall performance,
for both network processing as well as application-relevant metrics.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ports">
<section id="section-8">
      <h2 id="name-port-selection-and-applicat">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-port-selection-and-applicat" class="section-name selfRef">Port Selection and Application Endpoint Discovery</a>
      </h2>
<p id="section-8-1">In general, port numbers serve two purposes: "first, they provide a
demultiplexing identifier to differentiate transport sessions between the same
pair of endpoints, and second, they may also identify the application protocol
and associated service to which processes connect" <span>[<a href="#RFC6335" class="xref">RFC6335</a>]</span>. The assumption
that an application can be identified in the network based on the port number
is less true today due to encapsulation, mechanisms for dynamic port
assignments, and NATs.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">As QUIC is a general-purpose transport protocol, there are no requirements that
servers use a particular UDP port for QUIC. For applications with a fallback to
TCP that do not already have an alternate mapping to UDP, usually the
registration (if necessary) and use of the UDP port number corresponding to the
TCP port already registered for the application is appropriate. For example,
the default port for HTTP/3 <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span> is UDP port 443, analogous to HTTP/1.1
or HTTP/2 over TLS over TCP.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Additionally, Application-Layer Version Negotiation <span>[<a href="#RFC7301" class="xref">RFC7301</a>]</span> permits the
client and server to negotiate which of several protocols will be used on a
given connection.  Therefore, multiple applications might be supported on a
single UDP port based on the ALPN token offered.  Applications using QUIC
should register an ALPN token for use in the TLS handshake.<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">Applications could define an alternate endpoint discovery mechanism to allow
the usage of ports other than the default. For example, HTTP/3 (Sections <a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-3.2" class="relref">3.2</a> and <a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-3.3" class="relref">3.3</a> of <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>) specifies the use of HTTP Alternative Services
for an HTTP origin to advertise the availability of an equivalent HTTP/3
endpoint on a certain UDP port by using the "h3" ALPN token.
Note that HTTP/3's ALPN token ("h3") identifies not only the version of the
application protocol, but also the version of QUIC itself; this approach
allows unambiguous agreement between the endpoints on the protocol stack in use.<a href="#section-8-4" class="pilcrow">¶</a></p>
<p id="section-8-5">Given the prevalence of the assumption in network management
practice that a port number maps unambiguously to an application, the
use of ports that cannot easily be mapped to a registered service name
might lead to blocking or other changes to the forwarding behavior by network
elements such as firewalls that use the port number for application
identification.<a href="#section-8-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="connection-migration">
<section id="section-9">
      <h2 id="name-connection-migration">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-connection-migration" class="section-name selfRef">Connection Migration</a>
      </h2>
<p id="section-9-1">QUIC supports connection migration by the client. If an IP address
changes, a QUIC endpoint can still associate packets with an existing
transport connection using the destination connection ID field
(see also <a href="#connid" class="xref">Section 11</a>) in the QUIC header, unless a zero-length value is used.
This supports cases where address information changes, such as NAT rebinding,
intentional change of the local interface, or based on an indication in the
handshake of the server for a preferred address to be used.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Use of a non-zero-length connection ID for the server is strongly recommended if
any clients are behind a NAT or could be. A non-zero-length connection ID is
also strongly recommended when migration is supported.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Currently QUIC only supports failover cases. Only one "path" can be used at a
time; and only when the new path is validated, all traffic can be switched over
to that new path. Path validation means that the remote endpoint is required to
validate the new path before use in order to avoid address spoofing attacks.
Path validation takes at least one RTT and congestion control will also be reset
after path migration. Therefore migration usually has a performance impact.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">QUIC probing packets, which can be sent on multiple paths at once, are used
to perform address validation as well as measure path characteristics as input
for the switching decision. Probing packets cannot carry application data but
may contain padding frames. Endpoints can use information about their receipt
as input to congestion control for that path. Applications could use
information learned from probing to inform a decisions to switch paths.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">Only the client can actively migrate in version 1 of QUIC. However, servers can
indicate during the handshake that they prefer to transfer the connection to a
different address after the handshake. For instance, this could be used to move
from an address that is shared by multiple servers to an address that is unique
to the server instance. The server can provide an IPv4 and an IPv6 address in a
transport parameter during the TLS handshake and the client can select between
the two if both are provided. See also <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-9.6" class="relref">Section 9.6</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>.<a href="#section-9-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-termination">
<section id="section-10">
      <h2 id="name-connection-termination">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-connection-termination" class="section-name selfRef">Connection Termination</a>
      </h2>
<p id="section-10-1">QUIC connections are terminated in one of three ways: implicit idle timeout,
explicit immediate close, or explicit stateless reset.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">QUIC does not provide any mechanism for graceful connection termination;
applications using QUIC can define their own graceful termination process (see,
for example, <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-5.2" class="relref">Section 5.2</a> of [<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span>).<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">QUIC idle timeout is enabled via transport parameters. Client and server
announce a timeout period and the effective value for the connection is the
minimum of the two values. After the timeout period elapses, the connection is
silently closed. An application therefore should be able to configure its own
maximum value, as well as have access to the computed minimum value for this
connection. An application may adjust the maximum idle timeout for new
connections based on the number of open or expected connections, since shorter
timeout values may free-up resources more quickly.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">Application data exchanged on streams or in datagrams defers the QUIC idle
timeout. Applications that provide their own keep-alive mechanisms will
therefore keep a QUIC connection alive. Applications that do not provide their
own keep-alive can use transport-layer mechanisms (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-10.1.2" class="relref">Section 10.1.2</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>, and <a href="#resumption-v-keepalive" class="xref">Section 3.2</a>). However, QUIC implementation
interfaces for controlling such transport behavior can vary, affecting the
robustness of such approaches.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">An immediate close is signaled by a CONNECTION_CLOSE frame (see
<a href="#error-handling" class="xref">Section 6</a>). Immediate close causes all streams to become immediately
closed, which may affect applications; see <a href="#stream-limit-commitments" class="xref">Section 4.5</a>.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">A stateless reset is an option of last resort for an endpoint that does not have
access to connection state. Receiving a stateless reset is an indication of an
unrecoverable error distinct from connection errors in that there is no
application-layer information provided.<a href="#section-10-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="connid">
<section id="section-11">
      <h2 id="name-information-exposure-and-th">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-information-exposure-and-th" class="section-name selfRef">Information Exposure and the Connection ID</a>
      </h2>
<p id="section-11-1">QUIC exposes some information to the network in the unencrypted part of the
header, either before the encryption context is established or because the
information is intended to be used by the network. QUIC has a long header that
exposes some additional information (the version and the source connection ID),
while the short header exposes only the destination connection ID.
In QUIC version 1, the long header is used during connection establishment,
while the short header is used for data transmission in an established
connection.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">The connection ID can be zero length. Zero length connection IDs can be
chosen on each endpoint individually, on any packet except the first packets
sent by clients during connection establishment.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">An endpoint that selects a zero-length connection ID will receive packets with a
zero-length destination connection ID. The endpoint needs to use other
information, such as the source and destination IP address and port number to
identify which connection is referred to. This could mean that the endpoint is
unable to match datagrams to connections successfully if these values change,
making the connection effectively unable to survive NAT rebinding or migrate to
a new path.<a href="#section-11-3" class="pilcrow">¶</a></p>
<div id="server-generated-connection-id">
<section id="section-11.1">
        <h3 id="name-server-generated-connection">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-server-generated-connection" class="section-name selfRef">Server-Generated Connection ID</a>
        </h3>
<p id="section-11.1-1">QUIC supports a server-generated connection ID, transmitted to the client during
connection establishment (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34#section-7.2" class="relref">Section 7.2</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span>). Servers behind load
balancers may need to change the connection ID during the handshake, encoding
the identity of the server or information about its load balancing pool, in
order to support stateless load balancing.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<p id="section-11.1-2">Server deployments with load balancers and other routing infrastructure need to
ensure that this infrastructure consistently routes packets to the server
instance that has the connection state, even if addresses, ports, and/or
connection IDs change. This might require coordination between servers and
infrastructure. One method of achieving this involves encoding routing
information into the connection ID. For an example of this technique, see
<span>[<a href="#QUIC-LB" class="xref">QUIC-LB</a>]</span>.<a href="#section-11.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mitigating-timing-linkability-with-connection-id-migration">
<section id="section-11.2">
        <h3 id="name-mitigating-timing-linkabili">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-mitigating-timing-linkabili" class="section-name selfRef">Mitigating Timing Linkability with Connection ID Migration</a>
        </h3>
<p id="section-11.2-1">QUIC requires that endpoints generate fresh connection IDs for use on new
network paths. Choosing values that are unlinkable to an outside observer
ensures that activity on different paths cannot be trivially correlated
using the connection ID.<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2-2">While sufficiently robust connection ID generation schemes will mitigate
linkability issues, they do not provide full protection. Analysis of
the lifetimes of six-tuples (source and destination addresses as well as the
migrated CID) may expose these links anyway.<a href="#section-11.2-2" class="pilcrow">¶</a></p>
<p id="section-11.2-3">In the limit where connection migration in a server pool is rare, it is trivial
for an observer to associate two connection IDs. Conversely, in the opposite
limit where every server handles multiple simultaneous migrations, even an
exposed server mapping may be insufficient information.<a href="#section-11.2-3" class="pilcrow">¶</a></p>
<p id="section-11.2-4">The most efficient mitigations for these attacks are through network design
and/or operational practice, by using a load balancing architecture that
loads more flows onto a single server-side address, by coordinating the
timing of migrations in an attempt to increase the number of simultaneous
migrations at a given time, or through other means.<a href="#section-11.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="using-server-retry-for-redirection">
<section id="section-11.3">
        <h3 id="name-using-server-retry-for-redi">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-using-server-retry-for-redi" class="section-name selfRef">Using Server Retry for Redirection</a>
        </h3>
<p id="section-11.3-1">QUIC provides a Server Retry packet that can be sent by a server in response to
the Client Initial packet. The server may choose a new connection ID in that
packet and the client will retry by sending another Client Initial packet with
the server-selected connection ID. This mechanism can be used to redirect a
connection to a different server, e.g. due to performance reasons or when
servers in a server pool are upgraded gradually, and therefore may support
different versions of QUIC. In this case, it is assumed that all servers
belonging to a certain pool are served in cooperation with load balancers that
forward the traffic based on the connection ID. A server can choose the
connection ID in the Server Retry packet such that the load balancer will
redirect the next Client Initial packet to a different server in that pool.
Alternatively the load balancer can directly offer a Retry service as further
described in <span>[<a href="#QUIC-LB" class="xref">QUIC-LB</a>]</span>.<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<p id="section-11.3-2"><span><a href="https://rfc-editor.org/rfc/rfc5077#section-4" class="relref">Section 4</a> of [<a href="#RFC5077" class="xref">RFC5077</a>]</span> describes an example approach for constructing
TLS resumption tickets that can be also applied for validation tokens,
however, the use of more modern cryptographic algorithms is highly recommended.<a href="#section-11.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="quality-of-service-qos-and-dscp">
<section id="section-12">
      <h2 id="name-quality-of-service-qos-and-">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-quality-of-service-qos-and-" class="section-name selfRef">Quality of Service (QoS) and DSCP</a>
      </h2>
<p id="section-12-1">QUIC assumes that all packets of a QUIC connection, or at least with the
same 5-tuple {dest addr, source addr, protocol, dest port, source port}, will
receive similar network treatment since feedback about loss or delay
of each packet is used as input to the congestion controller. Therefore it is
not recommended to use different DiffServ Code Points (DSCPs) <span>[<a href="#RFC2475" class="xref">RFC2475</a>]</span> for
packets belonging to the same connection. If differential network treatment,
e.g. by the use of different DSCPs, is desired, multiple QUIC
connections to the same server may be used. However, in general it is
recommended to minimize the number of QUIC connections to the same server, to
avoid increased overheads and, more importantly, competing congestion control.<a href="#section-12-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-of-versions-and-cryptographic-handshake">
<section id="section-13">
      <h2 id="name-use-of-versions-and-cryptog">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-use-of-versions-and-cryptog" class="section-name selfRef">Use of Versions and Cryptographic Handshake</a>
      </h2>
<p id="section-13-1">Versioning in QUIC may change the protocol's behavior completely, except
for the meaning of a few header fields that have been declared to be invariant
<span>[<a href="#QUIC-INVARIANTS" class="xref">QUIC-INVARIANTS</a>]</span>. A version of QUIC
with a higher version number will not necessarily provide a better service,
but might simply provide a different feature set. As such, an application needs
to be able to select which versions of QUIC it wants to use.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">A new version could use an encryption scheme other than TLS 1.3 or higher.
<span>[<a href="#QUIC" class="xref">QUIC</a>]</span> specifies requirements for the cryptographic handshake as currently
realized by TLS 1.3 and described in a separate specification
<span>[<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>. This split is performed to enable
light-weight versioning with different cryptographic handshakes.<a href="#section-13-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="enabling-new-versions">
<section id="section-14">
      <h2 id="name-enabling-new-versions">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-enabling-new-versions" class="section-name selfRef">Enabling New Versions</a>
      </h2>
<p id="section-14-1">QUIC version 1 does not specify a version negotation mechanism in the base spec
but <span>[<a href="#I-D.draft-ietf-quic-version-negotiation" class="xref">I-D.draft-ietf-quic-version-negotiation</a>]</span> proposes an extension. This
process assumes that the set of versions that a server supports is fixed.  This
complicates the process for deploying new QUIC versions or disabling old
versions when servers operate in clusters.<a href="#section-14-1" class="pilcrow">¶</a></p>
<p id="section-14-2">A server that rolls out a new version of QUIC can do so in three stages.  Each
stage is completed across all server instances before moving to the next stage.<a href="#section-14-2" class="pilcrow">¶</a></p>
<p id="section-14-3">In the first stage of deployment, all server instances start accepting new
connections with the new version.  The new version can be enabled progressively
across a deployment, which allows for selective testing.  This is especially
useful when the new version is compatible with an old version, because the new
version is more likely to be used.<a href="#section-14-3" class="pilcrow">¶</a></p>
<p id="section-14-4">While enabling the new version, servers do not advertise the new version in any
Version Negotiation packets they send.  This prevents clients that receive a
Version Negotiation packet from attempting to connect to server instances that
might not have the new version enabled.<a href="#section-14-4" class="pilcrow">¶</a></p>
<p id="section-14-5">During the initial deployment, some clients will have received Version
Negotiation packets that indicate that the server does not support the new
version.  Other clients might have successfully connected with the new version
and so will believe that the server supports the new version.  Therefore,
servers need to allow for this ambiguity when validating the negotiated version.<a href="#section-14-5" class="pilcrow">¶</a></p>
<p id="section-14-6">The second stage of deployment commences once all server instances are able
accept new connections with the new version.  At this point, all servers can
start sending the new version in Version Negotiation packets.<a href="#section-14-6" class="pilcrow">¶</a></p>
<p id="section-14-7">During the second stage, the server still allows for the possibility that some
clients believe the new version to be available and some do not.  This state
will persist only for as long as any Version Negotiation packets take to be
transmitted and responded to.  So the third stage can follow after a relatively
short delay.<a href="#section-14-7" class="pilcrow">¶</a></p>
<p id="section-14-8">The third stage completes the process by enabling authentication of the
negotiated version with the assumption that the new version is fully available.<a href="#section-14-8" class="pilcrow">¶</a></p>
<p id="section-14-9">The process for disabling an old version or rolling back the introduction of a
new version uses the same process in reverse.  Servers disable validation of the
old version, stop sending the old version in Version Negotiation packets, then
the old version is no longer accepted.<a href="#section-14-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="unreliable-datagram-service-over-quic">
<section id="section-15">
      <h2 id="name-unreliable-datagram-service">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-unreliable-datagram-service" class="section-name selfRef">Unreliable Datagram Service over QUIC</a>
      </h2>
<p id="section-15-1"><span>[<a href="#I-D.ietf-quic-datagram" class="xref">I-D.ietf-quic-datagram</a>]</span> specifies a QUIC extension to enable sending
and receiving unreliable datagrams over QUIC. Unlike operating directly over
UDP, applications that use the QUIC datagram service do not need to implement
their own congestion control, per <span>[<a href="#RFC8085" class="xref">RFC8085</a>]</span>, as QUIC datagrams are
congestion controlled.<a href="#section-15-1" class="pilcrow">¶</a></p>
<p id="section-15-2">QUIC datagrams are not flow-controlled, and as such data chunks may be dropped
if the receiver is overloaded. While the reliable transmission service of QUIC
provides a stream-based interface to send and receive data in order over
multiple QUIC streams, the datagram service has a unordered message-based
interface. If needed, an application layer framing can be used on top to
allow separate flows of unreliable datagrams to be multiplexed on one QUIC
connection.<a href="#section-15-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-16-1">This document has no actions for IANA; however, note that <a href="#ports" class="xref">Section 8</a>
recommends that application bindings to QUIC for applications using
TCP register UDP ports analogous to their existing TCP registrations.<a href="#section-16-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-17">
      <h2 id="name-security-considerations">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-17-1">See the security considerations in <span>[<a href="#QUIC" class="xref">QUIC</a>]</span> and <span>[<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>; the security
considerations for the underlying transport protocol are relevant for
applications using QUIC, as well. Considerations on linkability, replay attacks,
and randomness discussed in <span>[<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span> should be taken into account when
deploying and using QUIC.<a href="#section-17-1" class="pilcrow">¶</a></p>
<p id="section-17-2">Application developers should note that any fallback they use when QUIC cannot
be used due to network blocking of UDP should guarantee the same security
properties as QUIC; if this is not possible, the connection should fail to
allow the application to explicitly handle fallback to a less-secure
alternative. See <a href="#fallback" class="xref">Section 2</a>.<a href="#section-17-2" class="pilcrow">¶</a></p>
<p id="section-17-3">Further, <span>[<a href="#QUIC-HTTP" class="xref">QUIC-HTTP</a>]</span> provides security considerations specific to HTTP.
However, discussions such as on cross-protocol attacks, traffic analysis
and padding, or migration might be relevant for other applications using QUIC
as well.<a href="#section-17-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="section-18">
      <h2 id="name-contributors">
<a href="#section-18" class="section-number selfRef">18. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-18-1">The following people have contributed text to this document:<a href="#section-18-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-18-2.1">Igor Lubashev<a href="#section-18-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-18-2.2">Mike Bishop<a href="#section-18-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-18-2.3">Martin Thomson<a href="#section-18-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-18-2.4">Lucas Pardue<a href="#section-18-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-18-2.5">Gorry Fairhurst<a href="#section-18-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="acknowledgments">
<section id="section-19">
      <h2 id="name-acknowledgments">
<a href="#section-19" class="section-number selfRef">19. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-19-1">Thanks also to Martin Duke, Sean Turner, and Ian Swett for their reviews.<a href="#section-19-1" class="pilcrow">¶</a></p>
<p id="section-19-2">This work is partially supported by the European Commission under Horizon 2020
grant agreement no. 688421 Measurement and Architecture for a Middleboxed
Internet (MAMI), and by the Swiss State Secretariat for Education, Research, and
Innovation under contract no. 15.0268. This support does not imply endorsement.<a href="#section-19-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-20">
      <h2 id="name-references">
<a href="#section-20" class="section-number selfRef">20. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-20.1">
        <h3 id="name-normative-references">
<a href="#section-20.1" class="section-number selfRef">20.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="QUIC">[QUIC]</dt>
        <dd>
<span class="refAuthor">Iyengar, J.</span> and <span class="refAuthor">M. Thomson</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-transport-34</span>, <time datetime="2021-01-14" class="refDate">14 January 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34">https://datatracker.ietf.org/doc/html/draft-ietf-quic-transport-34</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-INVARIANTS">[QUIC-INVARIANTS]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span>, <span class="refTitle">"Version-Independent Properties of QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-invariants-13</span>, <time datetime="2021-01-14" class="refDate">14 January 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-invariants-13">https://datatracker.ietf.org/doc/html/draft-ietf-quic-invariants-13</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-TLS">[QUIC-TLS]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span> and <span class="refAuthor">S. Turner</span>, <span class="refTitle">"Using TLS to Secure QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-tls-34</span>, <time datetime="2021-01-14" class="refDate">14 January 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-tls-34">https://datatracker.ietf.org/doc/html/draft-ietf-quic-tls-34</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6335">[RFC6335]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Eggert, L.</span>, <span class="refAuthor">Touch, J.</span>, <span class="refAuthor">Westerlund, M.</span>, and <span class="refAuthor">S. Cheshire</span>, <span class="refTitle">"Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry"</span>, <span class="seriesInfo">BCP 165</span>, <span class="seriesInfo">RFC 6335</span>, <span class="seriesInfo">DOI 10.17487/RFC6335</span>, <time datetime="2011-08" class="refDate">August 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6335">https://www.rfc-editor.org/rfc/rfc6335</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="TLS13">[TLS13]</dt>
      <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-20.2">
        <h3 id="name-informative-references">
<a href="#section-20.2" class="section-number selfRef">20.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Edeline16">[Edeline16]</dt>
        <dd>
<span class="refAuthor">Edeline, K.</span>, <span class="refAuthor">Kuehlewind, M.</span>, <span class="refAuthor">Trammell, B.</span>, <span class="refAuthor">Aben, E.</span>, and <span class="refAuthor">B. Donnet</span>, <span class="refTitle">"Using UDP for Internet Transport Evolution (arXiv preprint 1612.07816)"</span>, <time datetime="2016-12-22" class="refDate">22 December 2016</time>, <span>&lt;<a href="https://arxiv.org/abs/1612.07816">https://arxiv.org/abs/1612.07816</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Hatonen10">[Hatonen10]</dt>
        <dd>
<span class="refAuthor">Hatonen, S.</span>, <span class="refAuthor">Nyrhinen, A.</span>, <span class="refAuthor">Eggert, L.</span>, <span class="refAuthor">Strowes, S.</span>, <span class="refAuthor">Sarolahti, P.</span>, and <span class="refAuthor">M. Kojo</span>, <span class="refTitle">"An experimental study of home gateway characteristics (Proc. ACM IMC 2010)"</span>, <time datetime="2010-10" class="refDate">October 2010</time>. </dd>
<dd class="break"></dd>
<dt id="HTTP-REPLAY">[HTTP-REPLAY]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span>, <span class="refAuthor">Nottingham, M.</span>, and <span class="refAuthor">W. Tarreau</span>, <span class="refTitle">"Using Early Data in HTTP"</span>, <span class="seriesInfo">RFC 8470</span>, <span class="seriesInfo">DOI 10.17487/RFC8470</span>, <time datetime="2018-09" class="refDate">September 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8470">https://www.rfc-editor.org/rfc/rfc8470</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-httpbis-priority">[I-D.draft-ietf-httpbis-priority]</dt>
        <dd>
<span class="refAuthor">Oku, K.</span> and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"Extensible Prioritization Scheme for HTTP"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-priority-12</span>, <time datetime="2022-01-17" class="refDate">17 January 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-priority-12">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-priority-12</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-quic-version-negotiation">[I-D.draft-ietf-quic-version-negotiation]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span> and <span class="refAuthor">E. Rescorla</span>, <span class="refTitle">"Compatible Version Negotiation for QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-version-negotiation-08</span>, <time datetime="2022-06-08" class="refDate">8 June 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-version-negotiation-08">https://datatracker.ietf.org/doc/html/draft-ietf-quic-version-negotiation-08</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-quic-datagram">[I-D.ietf-quic-datagram]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Kinnear, E.</span>, and <span class="refAuthor">D. Schinazi</span>, <span class="refTitle">"An Unreliable Datagram Extension to QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-datagram-10</span>, <time datetime="2022-02-04" class="refDate">4 February 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-datagram-10">https://datatracker.ietf.org/doc/html/draft-ietf-quic-datagram-10</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-taps-arch">[I-D.ietf-taps-arch]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Trammell, B.</span>, <span class="refAuthor">Brunstrom, A.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">C. Perkins</span>, <span class="refTitle">"An Architecture for Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-arch-13</span>, <time datetime="2022-06-27" class="refDate">27 June 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-taps-arch-13">https://datatracker.ietf.org/doc/html/draft-ietf-taps-arch-13</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="PaaschNanog">[PaaschNanog]</dt>
        <dd>
<span class="refAuthor">Paasch, C.</span>, <span class="refTitle">"Network Support for TCP Fast Open (NANOG 67 presentation)"</span>, <time datetime="2016-06-13" class="refDate">13 June 2016</time>, <span>&lt;<a href="https://www.nanog.org/sites/default/files/Paasch_Network_Support.pdf">https://www.nanog.org/sites/default/files/Paasch_Network_Support.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-HTTP">[QUIC-HTTP]</dt>
        <dd>
<span class="refAuthor">Bishop, M.</span>, <span class="refTitle">"HTTP/3"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-http-34</span>, <time datetime="2021-02-02" class="refDate">2 February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34">https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-LB">[QUIC-LB]</dt>
        <dd>
<span class="refAuthor">Duke, M.</span>, <span class="refAuthor">Banks, N.</span>, and <span class="refAuthor">C. Huitema</span>, <span class="refTitle">"QUIC-LB: Generating Routable QUIC Connection IDs"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-load-balancers-13</span>, <time datetime="2022-03-28" class="refDate">28 March 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers-13">https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers-13</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2475">[RFC2475]</dt>
        <dd>
<span class="refAuthor">Blake, S.</span>, <span class="refAuthor">Black, D.</span>, <span class="refAuthor">Carlson, M.</span>, <span class="refAuthor">Davies, E.</span>, <span class="refAuthor">Wang, Z.</span>, and <span class="refAuthor">W. Weiss</span>, <span class="refTitle">"An Architecture for Differentiated Services"</span>, <span class="seriesInfo">RFC 2475</span>, <span class="seriesInfo">DOI 10.17487/RFC2475</span>, <time datetime="1998-12" class="refDate">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2475">https://www.rfc-editor.org/rfc/rfc2475</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5077">[RFC5077]</dt>
        <dd>
<span class="refAuthor">Salowey, J.</span>, <span class="refAuthor">Zhou, H.</span>, <span class="refAuthor">Eronen, P.</span>, and <span class="refAuthor">H. Tschofenig</span>, <span class="refTitle">"Transport Layer Security (TLS) Session Resumption without Server-Side State"</span>, <span class="seriesInfo">RFC 5077</span>, <span class="seriesInfo">DOI 10.17487/RFC5077</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5077">https://www.rfc-editor.org/rfc/rfc5077</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5382">[RFC5382]</dt>
        <dd>
<span class="refAuthor">Guha, S., Ed.</span>, <span class="refAuthor">Biswas, K.</span>, <span class="refAuthor">Ford, B.</span>, <span class="refAuthor">Sivakumar, S.</span>, and <span class="refAuthor">P. Srisuresh</span>, <span class="refTitle">"NAT Behavioral Requirements for TCP"</span>, <span class="seriesInfo">BCP 142</span>, <span class="seriesInfo">RFC 5382</span>, <span class="seriesInfo">DOI 10.17487/RFC5382</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5382">https://www.rfc-editor.org/rfc/rfc5382</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7301">[RFC7301]</dt>
        <dd>
<span class="refAuthor">Friedl, S.</span>, <span class="refAuthor">Popov, A.</span>, <span class="refAuthor">Langley, A.</span>, and <span class="refAuthor">E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time datetime="2014-07" class="refDate">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7301">https://www.rfc-editor.org/rfc/rfc7301</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7413">[RFC7413]</dt>
        <dd>
<span class="refAuthor">Cheng, Y.</span>, <span class="refAuthor">Chu, J.</span>, <span class="refAuthor">Radhakrishnan, S.</span>, and <span class="refAuthor">A. Jain</span>, <span class="refTitle">"TCP Fast Open"</span>, <span class="seriesInfo">RFC 7413</span>, <span class="seriesInfo">DOI 10.17487/RFC7413</span>, <time datetime="2014-12" class="refDate">December 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7413">https://www.rfc-editor.org/rfc/rfc7413</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8085">[RFC8085]</dt>
        <dd>
<span class="refAuthor">Eggert, L.</span>, <span class="refAuthor">Fairhurst, G.</span>, and <span class="refAuthor">G. Shepherd</span>, <span class="refTitle">"UDP Usage Guidelines"</span>, <span class="seriesInfo">BCP 145</span>, <span class="seriesInfo">RFC 8085</span>, <span class="seriesInfo">DOI 10.17487/RFC8085</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8085">https://www.rfc-editor.org/rfc/rfc8085</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Swett16">[Swett16]</dt>
        <dd>
<span class="refAuthor">Swett, I.</span>, <span class="refTitle">"QUIC Deployment Experience at Google (IETF96 QUIC BoF presentation)"</span>, <time datetime="2016-07-20" class="refDate">20 July 2016</time>, <span>&lt;<a href="https://www.ietf.org/proceedings/96/slides/slides-96-quic-3.pdf">https://www.ietf.org/proceedings/96/slides/slides-96-quic-3.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Trammell16">[Trammell16]</dt>
      <dd>
<span class="refAuthor">Trammell, B.</span> and <span class="refAuthor">M. Kuehlewind</span>, <span class="refTitle">"Internet Path Transparency Measurements using RIPE Atlas (RIPE72 MAT presentation)"</span>, <time datetime="2016-05-25" class="refDate">25 May 2016</time>, <span>&lt;<a href="https://ripe72.ripe.net/wp-content/uploads/presentations/86-atlas-udpdiff.pdf">https://ripe72.ripe.net/wp-content/uploads/presentations/86-atlas-udpdiff.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kuehlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Trammell</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="street-address">Gustav-Gull-Platz 1</span></div>
<div dir="auto" class="left">CH- <span class="locality">8004 Zurich</span>
</div>
<div dir="auto" class="left"><span class="country-name">Switzerland</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@trammell.ch" class="email">ietf@trammell.ch</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
